{% extends 'app_base.html' %}
{% block title %}{{ title }}{% endblock %}

{% block app_content %}
<form method="post" class="form-container" style="max-width: 900px;">
    {% csrf_token %}
    <h2>{{ title }}</h2>

    <fieldset>
        <legend>Dados da Transação</legend>
        {{ form.as_p }}
    </fieldset>

    <fieldset class="formset-container">
        <legend>Itens</legend>
        {{ formset.management_form }}
        {% for form in formset %}
        <div class="address-form">
            {{ form.id }}
            <div class="address-fields">
                <div class="form-group">{{ form.item.label_tag }} {{ form.item }}</div>
                <div class="form-group">{{ form.quantity.label_tag }} {{ form.quantity }}</div>
                <div class="form-group">{{ form.unit_price.label_tag }} {{ form.unit_price }}</div>
            </div>
            {% if form.instance.pk %}
            <div class="delete-form">
                {{ form.DELETE.label_tag }} {{ form.DELETE }}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </fieldset>

    <div class="form-actions">
        <button type="submit" class="btn btn-save">Salvar</button>
        <a href="{% url 'transaction_list' transaction_type=transaction_type %}" class="btn btn-cancel">Cancelar</a>
    </div>
</form>
{% endblock %}